cscope 15 /home/henrik/Projekter/AppFramework               0000009502
	@config/skel.cpp

19 
	~"<şas¢ame>.hµ
"

21 #ifdeà
THREAD_SAFE


22 
	~<mu‹x
>

23 
	g¡d
::
mu‹x
 
EnvV¬
::
mtx
;

	@config/skel.hpp

19 #iâdeà<
CAPITALIZED
 
CLASSNAME
>
_HPP


20 #defš<
CAPITALIZED
 
CLASSNAME
>
_HPP


22 #ifdeà
THREAD_SAFE


23 
	~<mu‹x
>

26 
	gşass
 <
	gşas¢ame
> {

	@include/Version.hpp

19 #iâdeà
VERSION_HPP


20 
	#VERSION_HPP


	)

22 
	~<¡ršg
>

24 cÚ¡ 
	g¡d
::
¡ršg
 
VERSION
 = "1.0.2";

	@src/main.cpp

19 
	~<io¡»am
>

20 
	~"EnvV¬.hµ
"

21 
	~"CÚfigMªag”.hµ
"

22 
	~"Logg”.hµ
"

23 
	~"Argum’tCÚfig.hµ
"

24 
	~"Argum’ts.hµ
"

25 
	~"CommªdLšeProûssÜ.hµ
"

26 
	~"UiMªag”.hµ
"

40 
	$maš
(
¬gc
, * 
¬gv
[]) {

44 
Œy
 {

46 autØ
defšedArgs
 = 
Argum’tCÚfig
::
	`g‘DefšedArgum’ts
();

47 
Argum’ts
 
	`cmdArgs
(
¬gc
, 
¬gv
, 
defšedArgs
);

48 
CommªdLšeProûssÜ
 
	`cmdProûssÜ
(
cmdArgs
);

49 
Argum’tCÚfig
::
	`£tupArgum’ts
(
cmdProûssÜ
);

50 
cmdProûssÜ
.
	`Proûss
();

53 
CÚfigMªag”
 
	`cÚfigMªag”
("cÚfig.jsÚ", 
cmdArgs
);

56 
EnvV¬Uts
 
	`myV¬
("LOGPATH");

57 
¡d
::
¡ršg
 
logP©hV®ue
 = 
myV¬
.
	`g‘
();

58 
Logg”
::
	`g‘In¡ªû
().
	`log
("LOGPATH v®ue: " + 
logP©hV®ue
, "maš", Logg”::
Sev”™y
::
Info
);

61 
UIMªag”
 
	`uiMªag”
(
cÚfigMªag”
, 
cmdArgs
);

62 
uiMªag”
.
	`run
();

64 } 
	`ÿtch
 (cÚ¡ 
¡d
::
exû±iÚ
& 
e
) {

65 
¡d
::
û¼
 << "E¼Ü Duršg In™Ÿliz©iÚ: " << 
e
.
	`wh©
(è<< std::
’dl
;

66 
	`ex™
(1);

75 
	}
}

	@subprojects/EnvVar/EnvVar.cpp

19 
	~"EnvV¬.hµ
"

21 
	~<c¡dlib
>

22 #ifdeà
THREAD_SAFE


23 
	~<mu‹x
>

24 
	g¡d
::
mu‹x
 
EnvV¬Uts
::
mtx
;

27 
	gEnvV¬Uts
::
	$EnvV¬Uts
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
è: 
	$v¬Name
(
Çme
è{
	}
}

29 
¡d
::
¡ršg
 
EnvV¬Uts
::
	$g‘
() const {

30 #ifdeà
THREAD_SAFE


31 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx
);

33 cÚ¡ * 
v®ue
 = 
¡d
::
	`g‘’v
(
v¬Name
.
	`c_¡r
());

34  (
v®ue
 !ğ
nuÎ±r
è? 
¡d
::
	`¡ršg
(value) : std::string();

35 
	}
}

37 
boŞ
 
	gEnvV¬Uts
::
	$£t
(cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) const {

38 #ifdeà
THREAD_SAFE


39 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx
);

41  
	`£‹nv
(
v¬Name
.
	`c_¡r
(), 
v®ue
.c_str(), 1) == 0;

42 
	}
}

44 
	gEnvV¬Uts
::
	$¡Üe
() {

45 #ifdeà
THREAD_SAFE


46 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx
);

48 
¡ÜedV®ue
 = 
	`g‘
();

49 
	}
}

51 
boŞ
 
	gEnvV¬Uts
::
	$»¡Üe
() const {

52 #ifdeà
THREAD_SAFE


53 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx
);

55 ià(
¡ÜedV®ue
.
	`has_v®ue
()) {

56  
	`£t
(
¡ÜedV®ue
.
	`v®ue
());

58  
çl£
;

59 
	}
}

	@subprojects/EnvVar/EnvVar.hpp

19 #iâdeà
ENVVAR_HPP


20 
	#ENVVAR_HPP


	)

22 
	~<¡ršg
>

23 
	~<İtiÚ®
>

24 #ifdeà
THREAD_SAFE


25 
	~<mu‹x
>

28 şas 
	cEnvV¬Uts
 {

29 
	mpublic
:

30 
ex¶ic™
 
EnvV¬Uts
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

32 
	m¡d
::
¡ršg
 
	$g‘
() const;

33 
boŞ
 
	$£t
(cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) const;

34 
	`¡Üe
();

35 
boŞ
 
	$»¡Üe
() const;

37 
´iv©e
:

38 
¡d
::
¡ršg
 
v¬Name
;

39 
¡d
::
İtiÚ®
<¡d::
¡ršg
> 
¡ÜedV®ue
;

41 #ifdeà
THREAD_SAFE


42 
¡d
::
mu‹x
 
mtx
;

	@subprojects/Logger/Logger.cpp

19 
	~<io¡»am
>

20 
	~<f¡»am
>

21 
	~<s¡»am
>

22 
	~<chrÚo
>

23 
	~<iomª
>

24 
	~"Logg”.hµ
"

25 
	~"DeçuÉS‘tšgs.hµ
"

26 
	~"EnvV¬.hµ
"

27 
	~"SŒšgUts.hµ
"

28 
	~"TimeUts.hµ
"

30 
	gLogg”
::
	$Logg”
() {

32 
¡d
::
¡ršg
 
deçuÉLogP©h
 = 
DeçuÉS‘tšgs
::
	`g‘DeçuÉCÚfig
()["AppFramework"]["Config"]["Defaults"]["Logger"]["defaultLogPath"];

34 
¡d
::
¡ršg
 
logP©h
 = 
deçuÉLogP©h
;

37 cÚ¡ * 
cÚfigP©h
 = 
¡d
::
	`g‘’v
("LOGPATH");

38 ià(
cÚfigP©h
 !ğ
nuÎ±r
) {

39 
logP©h
 = 
¡d
::
	`¡ršg
(
cÚfigP©h
è+ "/" + 
deçuÉLogP©h
;

42 
logFe
.
	`İ’
(
logP©h
, 
¡d
::
ios
::
out
 | std::ios::
­p
);

43 
	}
}

45 
	gLogg”
::~
	$Logg”
() {

46 ià(
logFe
.
	`is_İ’
()) {

47 
logFe
.
	`şo£
();

49 
	}
}

51 
	gLogg”
& Logg”::
	$g‘In¡ªû
() {

52 
Logg”
 
š¡ªû
;

53  
š¡ªû
;

54 
	}
}

56 
	gLogg”
::
	$log
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
, cÚ¡ std::¡ršg& 
loÿtiÚ
, 
Logg”
::
Sev”™y
 
£v”™y
) {

57 ià(
logFe
.
	`is_İ’
()) {

59 
¡d
::
¡ršg
 
timeFÜm©
 = 
DeçuÉS‘tšgs
::
	`g‘DeçuÉCÚfig
()["AppFramework"]["Config"]["Defaults"]["Logger"]["timeFormat"];

60 
¡d
::
¡ršg
 
logEÁryFÜm©
 = 
DeçuÉS‘tšgs
::
	`g‘DeçuÉCÚfig
()["AppFramework"]["Config"]["Defaults"]["Logger"]["logEntryFormat"];

63 autØ
now
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

64 autØ
now_time_t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`to_time_t
(
now
);

65 
¡d
::
tm
 
now_loÿÉime
 = *¡d::
	`loÿÉime
(&
now_time_t
);

66 
¡d
::
¡ršg¡»am
 
time¡amp
;

67 
time¡amp
 << 
¡d
::
	`put_time
(&
now_loÿÉime
, 
timeFÜm©
.
	`c_¡r
());

70 
SŒšgUts
::
	`»¶aûAÎ
(
logEÁryFÜm©
, "%time¡amp%", 
time¡amp
.
	`¡r
());

71 
SŒšgUts
::
	`»¶aûAÎ
(
logEÁryFÜm©
, "%Ëv–%", 
	`£v”™yToSŒšg
(
£v”™y
));

72 
SŒšgUts
::
	`»¶aûAÎ
(
logEÁryFÜm©
, "%loÿtiÚ%", 
loÿtiÚ
);

73 
SŒšgUts
::
	`»¶aûAÎ
(
logEÁryFÜm©
, "%mes§ge%", 
mes§ge
);

76 
logFe
 << 
logEÁryFÜm©
 << 
¡d
::
’dl
;

78 
	}
}

81 
	g¡d
::
¡ršg
 
Logg”
::
	$£v”™yToSŒšg
(
Sev”™y
 
£v”™y
) {

82 
£v”™y
) {

83 
Sev”™y
::
T¿û
:  "TRACE";

84 
Sev”™y
::
Debug
:  "DEBUG";

85 
Sev”™y
::
Info
:  "INFO";

86 
Sev”™y
::
W¬nšg
:  "WARNING";

87 
Sev”™y
::
E¼Ü
:  "ERROR";

88 
Sev”™y
::
F©®
:  "FATAL";

92 
	}
}

94 
	g¡d
::
¡ršg
 
Logg”
::
	$fÜm©Mes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
, 
Sev”™y
 
£v”™y
, cÚ¡ std::¡ršg& 
loÿtiÚ
) {

96 
¡d
::
¡ršg
 
deçuÉLogEÁryFÜm©
 = 
DeçuÉS‘tšgs
::
	`g‘DeçuÉCÚfig
()["AppFramework"]["Config"]["Defaults"]["Logger"]["logEntryFormat"];

97 
¡d
::
¡ršg
 
timeFÜm©
 = 
DeçuÉS‘tšgs
::
	`g‘DeçuÉCÚfig
()["AppFramework"]["Config"]["Defaults"]["Logger"]["timeFormat"];

100 
¡d
::
¡ršg
 
fÜm©‹dMes§ge
 = 
deçuÉLogEÁryFÜm©
;

101 
SŒšgUts
::
	`»¶aûAÎ
(
fÜm©‹dMes§ge
, "%time¡amp%", 
TimeUts
::
	`g‘Cu¼’tTime¡amp
(
timeFÜm©
));

102 
SŒšgUts
::
	`»¶aûAÎ
(
fÜm©‹dMes§ge
, "%Ëv–%", 
	`£v”™yToSŒšg
(
£v”™y
));

103 
SŒšgUts
::
	`»¶aûAÎ
(
fÜm©‹dMes§ge
, "%mes§ge%", 
mes§ge
);

104 
SŒšgUts
::
	`»¶aûAÎ
(
fÜm©‹dMes§ge
, "%loÿtiÚ%", 
loÿtiÚ
);

106  
fÜm©‹dMes§ge
;

107 
	}
}

	@subprojects/Logger/Logger.hpp

19 #iâdeà
LOGGER_HPP


20 
	#LOGGER_HPP


	)

22 
	~<¡ršg
>

23 
	~<f¡»am
>

24 
	~<mu‹x
>

26 şas 
	cLogg”
 {

27 
	mpublic
:

28 şas 
	cSev”™y
 {

29 
T¿û
,

30 
	mDebug
,

31 
	mInfo
,

32 
	mW¬nšg
,

33 
	mE¼Ü
,

34 
	mF©®


37 
	gLogg”
& 
g‘In¡ªû
();

38 
log
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
, cÚ¡ std::¡ršg& 
loÿtiÚ
, 
Sev”™y
 
£v”™y
);

39 
	$£tFÜm©
(cÚ¡ 
¡d
::
¡ršg
& 
fÜm©
) {

40 
this
->
logFÜm©
 = 
fÜm©
;

41 
	}
}

42 
	g¡d
::
¡ršg
 
fÜm©Mes§ge
(cÚ¡ 
¡d
::¡ršg& 
mes§ge
, 
Sev”™y
 
£v”™y
, cÚ¡ std::¡ršg& 
loÿtiÚ
);

43 
	g´iv©e
:

44 
¡d
::
of¡»am
 
logFe
;

45 
	g¡d
::
mu‹x
 
mtx
;

47 
Logg”
();

48 ~
Logg”
();

49 
Logg”
(cÚ¡ Logg”&èğ
d–‘e
;

50 
	gLogg”
& 
	gİ”©Ü
=(cÚ¡ 
Logg”
&èğ
d–‘e
;

51 
	g¡d
::
¡ršg
 
logFÜm©
;

52 
	g¡d
::
¡ršg
 
£v”™yToSŒšg
(
Sev”™y
 
£v”™y
);

	@subprojects/StringUtils/StringUtils.cpp

19 
	~"SŒšgUts.hµ
"

21 
Çme¥aû
 
	gSŒšgUts
 {

23 
»¶aûAÎ
(
¡d
::
¡ršg
& 
¡r
, cÚ¡ std::¡ršg& 
äom
, cÚ¡ std::¡ršg& 
to
) {

24 ià(
äom
.
em±y
()) {

27 
size_t
 
	g¡¬tPos
 = 0;

28 (
	g¡¬tPos
 = 
¡r
.
fšd
(
äom
, 
¡¬tPos
)è!ğ
¡d
::
¡ršg
::
Åos
) {

29 
¡r
.
»¶aû
(
¡¬tPos
, 
äom
.
Ëngth
(), 
to
);

30 
	g¡¬tPos
 +ğ
to
.
Ëngth
();

	@subprojects/StringUtils/StringUtils.hpp

19 #iâdeà
STRINGUTILS_HPP


20 
	#STRINGUTILS_HPP


	)

22 
	~<¡ršg
>

24 
Çme¥aû
 
	gSŒšgUts
 {

26 
»¶aûAÎ
(
¡d
::
¡ršg
& 
¡r
, cÚ¡ std::¡ršg& 
äom
, cÚ¡ std::¡ršg& 
to
);

	@subprojects/TimeUtils/TimeUtils.cpp

19 
	~"TimeUts.hµ
"

20 
	~<chrÚo
>

21 
	~<iomª
>

22 
	~<s¡»am
>

24 
Çme¥aû
 
	gTimeUts
 {

25 
	g¡d
::
¡ršg
 
g‘Cu¼’tTime¡amp
() {

26  
g‘Cu¼’tTime¡amp
("%Y-%m-%d %H:%M:%S");

29 
	g¡d
::
¡ršg
 
g‘Cu¼’tTime¡amp
(cÚ¡ 
¡d
::¡ršg& 
timeFÜm©
) {

30 autØ
now
 = 
¡d
::
chrÚo
::
sy¡em_şock
::now();

31 autØ
	gnow_time_t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
to_time_t
(
now
);

32 autØ
	gnow_loÿÉime
 = *
¡d
::
loÿÉime
(&
now_time_t
);

34 
	g¡d
::
o¡ršg¡»am
 
time¡ampSŒ—m
;

35 
	gtime¡ampSŒ—m
 << 
	g¡d
::
put_time
(&
now_loÿÉime
, 
timeFÜm©
.
c_¡r
());

36  
	gtime¡ampSŒ—m
.
¡r
();

39 
	g¡d
::
chrÚo
::
sy¡em_şock
::
time_pošt
 
·r£Time¡amp
(cÚ¡ 
¡d
::
¡ršg
& 
time¡amp
, cÚ¡ std::¡ršg& 
timeFÜm©
) {

40 
¡d
::
tm
m = {};

41 
	g¡d
::
i¡ršg¡»am
 
time¡ampSŒ—m
(
time¡amp
);

42 
	gtime¡ampSŒ—m
 >> 
	g¡d
::
g‘_time
(&
tm
, 
timeFÜm©
.
c_¡r
());

44 ià(
	gtime¡ampSŒ—m
.
ç
()) {

45 
throw
 
	g¡d
::
šv®id_¬gum’t
("Invalidimestamp or format.");

48 
	g¡d
::
time_t
 
time
 = 
¡d
::
mktime
(&
tm
);

49  
	g¡d
::
chrÚo
::
sy¡em_şock
::
äom_time_t
(
time
);

52 
	g¡d
::
chrÚo
::
£cÚds
 
ÿlcuÏ‹TimeDifã»nû
(cÚ¡ 
¡d
::
¡ršg
& 
time¡amp1
, cÚ¡ std::¡ršg& 
time¡amp2
, cÚ¡ std::¡ršg& 
timeFÜm©
) {

53 
¡d
::
chrÚo
::
sy¡em_şock
::
time_pošt
 
time1
 = 
·r£Time¡amp
(
time¡amp1
, 
timeFÜm©
);

54 
	g¡d
::
chrÚo
::
sy¡em_şock
::
time_pošt
 
time2
 = 
·r£Time¡amp
(
time¡amp2
, 
timeFÜm©
);

56 
	g¡d
::
chrÚo
::
£cÚds
 
difã»nû
 = 
¡d
::chrÚo::
du¿tiÚ_ÿ¡
<¡d::chrÚo::£cÚds>(
time2
 - 
time1
);

57  
	gdifã»nû
;

	@subprojects/TimeUtils/TimeUtils.hpp

19 #iâdeà
TIMEUTILS_HPP


20 
	#TIMEUTILS_HPP


	)

22 
	~<¡ršg
>

23 
	~<chrÚo
>

25 
Çme¥aû
 
	gTimeUts
 {

26 
	g¡d
::
¡ršg
 
g‘Cu¼’tTime¡amp
();

27 
	g¡d
::
¡ršg
 
g‘Cu¼’tTime¡amp
(cÚ¡ 
¡d
::¡ršg& 
timeFÜm©
);

28 
	g¡d
::
chrÚo
::
sy¡em_şock
::
time_pošt
 
·r£Time¡amp
(cÚ¡ 
¡d
::
¡ršg
& 
time¡amp
, cÚ¡ std::¡ršg& 
timeFÜm©
);

29 
	g¡d
::
chrÚo
::
£cÚds
 
ÿlcuÏ‹TimeDifã»nû
(cÚ¡ 
¡d
::
¡ršg
& 
time¡amp1
, cÚ¡ std::¡ršg& 
time¡amp2
, cÚ¡ std::¡ršg& 
timeFÜm©
);

	@
1
.
1
/usr/include
12
337
config/skel.cpp
config/skel.hpp
include/Version.hpp
src/main.cpp
subprojects/EnvVar/EnvVar.cpp
subprojects/EnvVar/EnvVar.hpp
subprojects/Logger/Logger.cpp
subprojects/Logger/Logger.hpp
subprojects/StringUtils/StringUtils.cpp
subprojects/StringUtils/StringUtils.hpp
subprojects/TimeUtils/TimeUtils.cpp
subprojects/TimeUtils/TimeUtils.hpp
